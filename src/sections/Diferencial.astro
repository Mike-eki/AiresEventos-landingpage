---
import Accesibility from "../icons/Accesibility.astro";
import Disco from "../icons/Disco.astro";
import Heart from "../icons/Heart.astro";
import New from "../icons/New.astro";
import Service from "../icons/Service.astro";
import Shield from "../icons/Shield.astro";
import Star from "../icons/Star.astro";
import Team from "../icons/Team.astro"
import Temperature from "../icons/Temperature.astro";
---

<section class="difference-section">
    <hgroup class="title-container">
        <div class="titles">
            <h2 class="dif-title-1">Nuestro</h2>
            <h2 class="dif-title-2">DIFERENCIAL</h2>
        </div>
        <img class="difference-bg" src="images/dif-main.webp" alt="">
    </hgroup>
    <ul class="container-of-items">
        <li class="difference-item-container difference-to-r dif-item-1">
            <Star />
            <p class="difference-item"><strong>Trayectoria y la confianza</strong> de quienes nos eligen año tras año.</p>
        </li>
        <li class="difference-item-container difference-to-l dif-item-2">
            <Heart />
            <p class="difference-item"><strong>Nuestra dedicación y amor</strong> por lo que hacemos.</p>
        </li>
        <li class="difference-item-container difference-to-r dif-item-3">
            <New />
            <p class="difference-item"><strong>Renovación constante</strong> de nuestros
            espacios y servicios.</p>
        </li>
        <li class="difference-item-container difference-to-l dif-item-4">
            <Team />
            <p class="difference-item"><strong>Capacitación permanente de nuestro equipo</strong> para brindar excelencia.</p>
        </li>
        <li class="difference-item-container difference-to-r dif-item-5">
            <Temperature />
            <p class="difference-item"><strong>Climatización integral</strong> para el máximo confort en cualquier época del año.</p>
        </li>
        <li class="difference-item-container difference-to-l dif-item-6">
            <Disco />
            <p class="difference-item"><strong>Sonido e iluminación profesional</strong> que se adaptan al estilo de tu celebración.</p>
        </li>
        <li class="difference-item-container difference-to-r dif-item-7">
            <Accesibility />
            <p class="difference-item">Áreas completamente accesibles, incluyendo <strong>rampas y toilettes adaptados.</strong></p>
        </li>
        <li class="difference-item-container difference-to-l dif-item-8">
            <Shield />
            <p class="difference-item"><strong>Estacionamiento privado con vigilancia</strong>, garantizando comodidad y seguridad.</p>
        </li>
        <li class="difference-item-container difference-to-r dif-item-9">
            <Service />
            <p class="difference-item"><strong>Servicio integral</strong> que incluye maître, camareros, seguridad y chefs especializados.</p>
        </li>
    </ul>

    <footer class="where">
        <h2>UBICACIÓN</h2>
        <p>Nuestra ubicación estratégica te conecta fácilmente con toda la ciudad y alrededores: a minutos del centro, con rápido acceso desde zona norte, sur, Funes y Roldán.</p>

        <div class="where-action">
            <div class="round-rect left"></div>
            <a class="btn-map" href="https://maps.app.goo.gl/FmwZCqyzfiUDjLV28" target="_blank">Ver mapa</a>
            <div class="round-rect right"></div>
        </div>

    </footer>
</section>

<style>

    section {
        background-color: var(--light-beige);
        padding-bottom: calc(var(--space) * 3);
        padding-top: 0;
    }

    ul, li {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    a {
        text-decoration: none;
    }

    img {
        display: block;
        width: 100%;
        object-fit: cover;
    }

    .title-container {
        position: relative;

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        gap: calc(var(--space) * 1.5);
    }
    .titles {
        position: absolute;

        display: flex;
        flex-direction: column;

        gap: calc(var(--space) * 1.5);
        z-index: 2;
        color: var(--white);

        --min-font-size: 2rem;
        --max-font-size: 4rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );
    }
    .title-container img {
        object-position: center;
        /* aspect-ratio: 16/9; */
        z-index: 1;
        filter: brightness(0.5);

        height: 100vh;
    }

    .container-of-items {
        display: flex;
        flex-direction: column;

        padding-block: calc(var(--space) * 1.75);

        gap: calc(var(--space) * 1.2);

        background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url("images/dif-bg.webp");
        background-position: center;
        background-size: cover;
        backdrop-filter: ;
    }

    .difference-item-container {
        padding: calc(var(--space) * 1.5);
        background-color: rgba(170, 167, 158, 0.1);
        border: 4px solid var(--desert-sand);

        display: flex;
        align-items: center;
        gap: calc(var(--space) * 0.75);

        max-width: max-content;
    }

    .difference-item {
        max-width: 40ch;
        text-wrap: balance; /*balance | pretty*/
        color: var(--light-beige);

        --min-font-size: 0.8rem;
        --max-font-size: 1.25rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );
    }
    .difference-to-l {
        align-self: flex-start;
        border-radius: 0 100rem 100rem 0;
        border-left: none;
    }
    .difference-to-r {
        align-self: flex-end;
        border-radius: 100rem 0 0 100rem;
        border-right: none;
    }


    .where {
        display: flex;
        flex-direction: column;

        padding-top: calc(var(--space) * 4);
        padding-bottom: calc(var(--space) * 2);

        gap: calc(var(--space) * 3);
    }

    .where h2, .where p {
        margin-inline: auto;
    }
    .where h2 {
        color: var(--violet-gum);

        --min-font-size: 3rem;
        --max-font-size: 8rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );
    }
    .where p {
        color: var(--desert-sand);
        max-width: 50ch;
        text-wrap: balance;
        text-align: center;

        --min-font-size: 0.8rem;
        --max-font-size: 1.1rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );
    }

    .where-action {
        display: flex;
        justify-content: space-between;
        align-items: stretch;

        gap: calc(var(--space) * 2);
    }

    .btn-map {
        padding: calc(var(--space) * 2);
        border-radius: 100rem;
        color: var(--violet-gum);
        border: 4px solid var(--violet-gum);

        text-wrap-mode: nowrap;

        --min-font-size: 1rem;
        --max-font-size: 3rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );
    }

    .round-rect {
        display: block;

        max-width: 100%;
        width: 100%;
        
        outline: 4px solid var(--desert-sand);
    }
    .round-rect.left {
        border-radius: 0 100rem 100rem 0;  
    }
    .round-rect.right {
        border-radius: 100rem 0 0 100rem;
    }

</style>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';
  
  gsap.registerPlugin(ScrollTrigger);
  
  // Animaciones cuando la sección entra en vista
  document.addEventListener('DOMContentLoaded', () => {
    // Animar los títulos del diferencial
    gsap.from('.dif-title-1', {
      scrollTrigger: {
        trigger: '.titles',
        start: 'top 85%',
        end: 'bottom 60%',
        // markers: true, // Descomentar para depuración visual
      },
      opacity: 0,
      y: 50,
      duration: 1.2,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-title-2', {
      scrollTrigger: {
        trigger: '.titles',
        start: 'top 85%',
        end: 'bottom 60%',
      },
      opacity: 0,
      y: 50,
      duration: 1.2,
      delay: 0.3,
      ease: 'power3.out'
    });
    
    // Animar la imagen de fondo
    gsap.from('.difference-bg', {
      scrollTrigger: {
        trigger: '.title-container',
        start: 'top 80%',
      },
      opacity: 0,
      scale: 1.1,
      duration: 1.5,
      ease: 'power3.out'
    });
    
    // Animar los items de diferencias con direcciones alternadas
    gsap.from('.dif-item-1', {
      scrollTrigger: {
        trigger: '.dif-item-1',
        start: 'top 90%',
      },
      opacity: 0,
      x: 100, // Desde derecha (por difference-to-r)
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-2', {
      scrollTrigger: {
        trigger: '.dif-item-2',
        start: 'top 90%',
      },
      opacity: 0,
      x: -100, // Desde izquierda (por difference-to-l)
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-3', {
      scrollTrigger: {
        trigger: '.dif-item-3',
        start: 'top 90%',
      },
      opacity: 0,
      x: 100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-4', {
      scrollTrigger: {
        trigger: '.dif-item-4',
        start: 'top 90%',
      },
      opacity: 0,
      x: -100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-5', {
      scrollTrigger: {
        trigger: '.dif-item-5',
        start: 'top 90%',
      },
      opacity: 0,
      x: 100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-6', {
      scrollTrigger: {
        trigger: '.dif-item-6',
        start: 'top 90%',
      },
      opacity: 0,
      x: -100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-7', {
      scrollTrigger: {
        trigger: '.dif-item-7',
        start: 'top 90%',
      },
      opacity: 0,
      x: 100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-8', {
      scrollTrigger: {
        trigger: '.dif-item-8',
        start: 'top 90%',
      },
      opacity: 0,
      x: -100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    gsap.from('.dif-item-9', {
      scrollTrigger: {
        trigger: '.dif-item-9',
        start: 'top 90%',
      },
      opacity: 0,
      x: 100,
      duration: 1.1,
      ease: 'power3.out'
    });
    
    // Animar el título de ubicación
    gsap.from('.where h2', {
      scrollTrigger: {
        trigger: '.where',
        start: 'top 85%',
      },
      opacity: 0,
      y: 50,
      duration: 1.2,
      ease: 'power3.out'
    });
    
    // Animar la descripción de ubicación
    gsap.from('.where p', {
      scrollTrigger: {
        trigger: '.where',
        start: 'top 80%',
      },
      opacity: 0,
      x: -30,
      duration: 1.2,
      delay: 0.2,
      ease: 'power3.out'
    });
    
    // Animar el botón del mapa
    gsap.from('.btn-map', {
      scrollTrigger: {
        trigger: '.where-action',
        start: 'top 85%',
      },
      opacity: 0,
      scale: 0.8,
      duration: 1,
      ease: 'power3.out'
    });
    
    // Animar los semicírculos
    gsap.from('.round-rect.left', {
      scrollTrigger: {
        trigger: '.where-action',
        start: 'top 85%',
      },
      opacity: 0,
      scaleX: 0,
      duration: 1,
      ease: 'power3.out'
    });
    
    gsap.from('.round-rect.right', {
      scrollTrigger: {
        trigger: '.where-action',
        start: 'top 85%',
      },
      opacity: 0,
      scaleX: 0,
      duration: 1,
      delay: 0.2,
      ease: 'power3.out'
    });

    ScrollTrigger.refresh();
  });
</script>