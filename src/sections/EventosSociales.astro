---
import TitleEventos from "../title-svgs/TitleEventos.astro";
---

<section class="social-events">
    <hgroup class="title">
        <h2 class="silouette" style="display: none;">EVENTOS</h2>
        <TitleEventos />
        <h2>SOCIALES</h2>
    </hgroup>
    <img class="main-bg" src="images/intro-bg.webp" alt="Eventos Sociales">
    <div class="text">
        <p>Cada evento merece ser único. Por eso te acompañamos en cada detalle, combinando un salón preparado para todo tipo de celebraciones con la gastronomía premium de Aires Catering, para que vos solo disfrutes.</p>
    </div>
</section>

<picture class="gallery">
    <img class="top-left" src="images/social-1.webp" alt="">
    <img class="top-right" src="images/social-2.webp" alt="">
    <img class="bottom-left" src="images/social-3.webp" alt="">
    <img class="bottom-right" src="images/social-4.webp" alt="">
</picture>

<style>
    .social-events {
        position: relative;
        padding-block: calc(var(--space) * 4);
        background-color: var(--light-beige);
    }
    .title, .text {
        position: absolute;
    }
    .title {
        top: 6rem;
        left: 2rem;
        color: var(--desert-sand);
        text-align: right;

        display: flex;
        flex-direction: column;
        gap: calc(var(--space) * 1.5);

        z-index: 10000;
    }
    .text {
        bottom: 50%;
        transform: translateY(50%);
        left: 0;
        max-width: 40ch;
        background-color: var(--desert-sand);
        padding: 3rem;
        color: var(--light-beige);

        border-radius: 0 100rem 100rem 0;
    }

    h2 {
        font-weight: 900;
        text-align: left;
        
        --min-font-size: 4rem;
        --max-font-size: 9rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );

    }
    @supports (-webkit-text-stroke: 3px black) {
        .silouette {
            -webkit-text-stroke: 1px var(--desert-sand);
            color: transparent;
        }
    }
    img {
        display: block;
        max-width: 100%;
        object-fit: cover;
    }

    .main-bg {
        width: 75%;
        height: 45rem;
        border-radius: 100rem 0 0 100rem;
        margin-left: auto;
        filter: brightness(0.5);
    }

    .gallery {
        display: grid;
        grid-template-columns: 1fr 1fr;
        background-color: var(--light-beige);
    }

    .gallery img {
        width: 100%;
        aspect-ratio: 1 / 1;
    }

    .top-left {
        border-radius: 100rem 100rem 0 0;
    }
    .top-right {
        border-radius: 100rem 0 0 100rem;
    }
    .bottom-left {
        border-radius: 0 100rem 100rem 0;
    }
    .bottom-right {
        border-radius: 0 0 100rem 100rem;
    }
</style>


<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';
  
  gsap.registerPlugin(ScrollTrigger);
  
  // Animaciones cuando la sección entra en vista
  document.addEventListener('DOMContentLoaded', () => {
    // Animar el título y el SVG
    gsap.from(['.social-events .title h2', '.social-events .title svg'], {
      scrollTrigger: {
        trigger: '.social-events',
        start: 'top 80%',
        // markers: true, // Descomentar para depuración visual
      },
      opacity: 0,
      y: 30,
      duration: 1,
      stagger: 0.2,
      ease: 'power3.out'
    });
    
    // Animar el texto
    gsap.from('.social-events .text p', {
      scrollTrigger: {
        trigger: '.social-events',
        start: 'top 80%',
      },
      opacity: 0,
      x: -30,
      duration: 1,
      delay: 0.3,
      ease: 'power3.out'
    });
    
    // Animar la imagen principal
    gsap.from('.social-events .main-bg', {
      scrollTrigger: {
        trigger: '.social-events',
        start: 'top 80%',
      },
      opacity: 0,
      scale: 1.1,
      duration: 1.2,
      ease: 'power3.out'
    });
    
    // Animar las imágenes de la galería con stagger
    gsap.from([
      '.gallery .top-left',
      '.gallery .top-right',
      '.gallery .bottom-left',
      '.gallery .bottom-right'
    ], {
      scrollTrigger: {
        trigger: '.gallery',
        start: 'top 80%',
      },
      opacity: 0,
      y: 50,
      duration: 1,
      stagger: 0.2,
      ease: 'power3.out'
    });

    ScrollTrigger.refresh(); // Refresca triggers después de carga
  });
</script>