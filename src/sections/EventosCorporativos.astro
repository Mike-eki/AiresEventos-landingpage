<section id="eventos-corporativos" class="corporative-events">
    <hgroup class="corporative-events-titles">
        <header class="corporative-events-titles-container">
            <h2>EVENTOS</h2>
            <h2>CORPORATIVOS</h2>
        </header>
        <img class="corporative-events-bg" src="images/corp-event-bg.webp" alt="">
    </hgroup>
    <article class="corporative-events-text">
        <p class="paragraph">Más que un evento, una experiencia para tu equipo y tus clientes. Un espacio que refleja lo mejor de tu empresa.</p>
        <img src="images/corp-event-1.webp" alt="">
    </article>
</section>


<style>
  #eventos-corporativos {
    overflow: hidden;
  }
    img {
        display: block;
        width: 100%;
        object-fit: cover;
    }
    .corporative-events-bg {
        aspect-ratio: 16/9;
        filter: brightness(0.5);
        z-index: -1;
    }

    .corporative-events-titles {
        position: relative;

        display: flex;
        justify-content: center;
        align-items: center;
    }

    .corporative-events-titles-container {
        position: absolute;

        display: flex;
        flex-direction: column;

        gap: calc(var(--space) * 1.3);
    }

    .corporative-events-titles-container h2 {

        text-align: center;
        
        color: var(--white);

        font-weight: 700;

        --min-font-size: 2.5rem;
        --max-font-size: 6rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: clamp(2.5rem, 1.2195rem + 5.4634vw, 6rem);
    }

    .corporative-events-text {
        position: relative;

        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .paragraph {
        position: absolute;
        color: var(--light-beige);
        background-color: var(--desert-sand);

        max-width: 54ch;
        text-align: center;

        padding: calc(var(--space) * 2);

        border-radius: 0 0 100rem 100rem;

        --min-font-size: 0.8rem;
        --max-font-size: 1.2rem;
        --min-viewport: 375px;
        --max-viewport: 1400px;

        font-size: calc(
            var(--min-font-size) + 
            (var(--max-font-size) - var(--min-font-size)) * 
            ((100vw - var(--min-viewport)) / (var(--max-viewport) - var(--min-viewport)))
        );
    }

    .corporative-events-text img {
        z-index: -1;
    }
</style>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';
  
  gsap.registerPlugin(ScrollTrigger);
  
  // Animaciones cuando la sección entra en vista
  document.addEventListener('DOMContentLoaded', () => {
    // Animar los títulos de eventos corporativos - con trigger específico
    gsap.from('.corporative-events-titles-container h2', {
      scrollTrigger: {
        trigger: '.corporative-events-titles-container',
        start: 'top 85%',
        end: 'bottom 60%',
        // markers: true, // Descomentar para depuración visual
      },
      opacity: 0,
      y: 50,
      duration: 1.2,
      stagger: 0.4,
      ease: 'power3.out'
    });
    
    // Animar la imagen de fondo - con z-index bajo y después de los títulos
    gsap.from('.corporative-events-bg', {
      scrollTrigger: {
        trigger: '.corporative-events-titles',
        start: 'top 80%',
      },
      opacity: 0,
      scale: 1.1,
      duration: 1.5,
      delay: 0.3, // Aparece después de que los títulos comienzan
      ease: 'power3.out'
    });
    
    // Animar el texto del párrafo - con posición absoluta (alto z-index)
    gsap.from('.paragraph', {
      scrollTrigger: {
        trigger: '.corporative-events-text',
        start: 'top 85%',
      },
      opacity: 0,
      y: -30, // Animación desde arriba (por la posición en la parte superior)
      duration: 1.2,
      ease: 'power3.out'
    });
    
    // Animar la imagen del artículo - con z-index bajo
    gsap.from('.corporative-events-text img', {
      scrollTrigger: {
        trigger: '.corporative-events-text',
        start: 'top 80%',
      },
      opacity: 0,
      y: 60,
      duration: 1.3,
      delay: 0.4, // Aparece después del texto
      ease: 'power3.out'
    });

    ScrollTrigger.refresh();
  });
</script>